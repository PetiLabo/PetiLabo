!function(t){function e(e){return t.map(n(e),function(t){return'<input type="hidden" name="'+t.name+'" value="'+t.value+'"/>'}).join("")}function n(e){function n(t,e){i.push({name:t,value:e})}if(t.isArray(e))return e;var i=[];return"object"==typeof e?t.each(e,function(e){t.isArray(this)?t.each(this,function(){n(e,this)}):n(e,t.isFunction(this)?this():this)}):"string"==typeof e&&t.each(e.split("&"),function(){var e=t.map(this.split("="),function(t){return decodeURIComponent(t.replace(/\+/g," "))});n(e[0],e[1])}),i}function i(e,n){var i,o=t(e).contents().get(0);if(t.isXMLDoc(o)||o.XMLDocument)return o.XMLDocument||o;switch(i=t(o).find("body").html(),n){case"xml":i=r(i);break;case"json":i=window.eval("("+i+")")}return i}function r(t){if(window.DOMParser)return(new DOMParser).parseFromString(t,"application/xml");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.loadXML(t),e}var o=0;t.fn.upload=function(n,r,a,c){var u,s,p,f=this,h="jquery_upload"+ ++o,l=t('<iframe name="'+h+'" style="position:absolute;top:-9999px" />').appendTo("body"),m='<form target="'+h+'" method="post" enctype="multipart/form-data" />';return t.isFunction(r)&&(c=a,a=r,r={}),s=t("input:checkbox",this),p=t("input:checked",this),m=f.wrapAll(m).parent("form").attr("action",n),s.removeAttr("checked"),p.attr("checked",!0),u=e(r),u=u?t(u).appendTo(m):null,m.submit(function(){l.load(function(){var e=i(this,c),n=t("input:checked",f);m.after(f).remove(),s.removeAttr("checked"),n.attr("checked",!0),u&&u.remove(),setTimeout(function(){l.remove(),"script"===c&&t.globalEval(e),a&&a.call(f,e)},0)})}).submit(),this}}(jQuery);